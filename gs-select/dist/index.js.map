{"version":3,"sources":["../src/GSSelect.tsx","../src/i18n/en.json","../src/i18n/pt.json","../src/i18n.ts","../src/styles.module.css"],"sourcesContent":["import React, {\n  useState,\n  useRef,\n  useEffect,\n  useCallback,\n  useId,\n  forwardRef,\n} from \"react\";\nimport clsx from \"clsx\";\nimport { generateAriaAttributes } from \"@carlos-gs99/utils\";\nimport { useTranslation } from \"@carlos-gs99/hooks\";\nimport { useDebug } from \"@carlos-gs99/utils\";\nimport { GS_SELECT_NAMESPACE, registerGSSelectI18n } from \"./i18n\";\nimport { ButtonBase } from \"@carlos-gs99/primitives\";\nimport { GSLoading } from \"@carlos-gs99/gs-loading\";\nimport { GSIcon } from \"@carlos-gs99/gs-icon\";\nimport { GSTooltip } from \"@carlos-gs99/gs-tooltip\";\nimport type { GSSelectProps, GSSelectOption } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nexport type { GSSelectProps, GSSelectOption };\n\n/**\n * GSSelect - Advanced Select component with GS styling\n *\n * Features:\n * - Label and error handling\n * - Helper text support\n * - Size variants (sm, md, lg)\n * - Visual variants (outlined, filled, standard, soft, solid, plain)\n * - Accessible with proper ARIA attributes\n * - Keyboard navigation (Arrow keys, Home, End, Enter, Escape)\n * - Click outside to close\n * - Loading state with spinner\n * - Clearable with X button\n * - Validation states (success, warning, error)\n * - Debug mode integration\n * - i18n support\n */\nconst GSSelectComponent = (\n  props: GSSelectProps,\n  ref: React.Ref<HTMLDivElement>\n) => {\n  const {\n  options = [],\n    optionGroups,\n  value,\n  defaultValue = null,\n  onChange,\n  label,\n  error,\n  helperText,\n  required = false,\n    size = \"md\",\n    variant = \"outlined\",\n    color = \"primary\",\n    placeholder,\n  disabled = false,\n    loading = false,\n    clearable = false,\n    clearButtonOutside = false,\n    onClear,\n    validationState = null,\n    showValidationIcon = false,\n    validationIconOutside = false,\n    loadingPosition = 'inside',\n    searchable = false,\n    searchPlaceholder,\n    onSearch,\n    async: asyncMode = false,\n    loadOptions,\n    debounceTime = 300,\n    loadingMessage,\n  className,\n    selectClassName,\n    labelClassName,\n    dropdownClassName,\n  id,\n  // name, // unused for now\n  fullWidth = false,\n    widthMode = 'min',\n    maxHeight,\n    open: controlledOpen,\n    onOpenChange,\n    alignSelectedToTrigger = false,\n    startDecorator,\n    endDecorator,\n    renderOption,\n    renderValue,\n    emptyMessage,\n    debug = false,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n    ariaRequired,\n  } = props;\n\n  const { t, i18n } = useTranslation(GS_SELECT_NAMESPACE);\n\n  useEffect(() => {\n    registerGSSelectI18n(i18n);\n  }, [i18n]);\n\n  // Debug mode\n  const debugUtils = useDebug(\"GSSelect\", debug);\n  \n  // State management\n  const [internalOpen, setInternalOpen] = useState(false);\n  const [internalValue, setInternalValue] = useState<string | number | null>(\n    defaultValue\n  );\n  const [focusedIndex, setFocusedIndex] = useState(-1);\n  const [openUpward, setOpenUpward] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [alignmentOffset, setAlignmentOffset] = useState<number>(0);\n  const [typeaheadQuery, setTypeaheadQuery] = useState(\"\");\n  const [asyncOptions, setAsyncOptions] = useState<GSSelectOption[]>([]);\n  const [isLoadingAsync, setIsLoadingAsync] = useState(false);\n  const [asyncError, setAsyncError] = useState<string | null>(null);\n  const typeaheadTimerRef = useRef<number | null>(null);\n  const asyncDebounceTimerRef = useRef<number | null>(null);\n\n  // Refs\n  const triggerRef = useRef<HTMLDivElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const optionRefs = useRef<(HTMLDivElement | null)[]>([]);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  const reactId = useId();\n  const baseId = id ?? `gs-select-${reactId.replace(/:/g, \"\")}`;\n  const labelId = label ? `${baseId}-label` : undefined;\n  const errorId = error ? `${baseId}-error` : undefined;\n  const helperId = helperText ? `${baseId}-helper` : undefined;\n\n  // Computed values\n  const isControlled = value !== undefined;\n  const resolvedValue = isControlled ? value : internalValue;\n  const isOpenControlled = controlledOpen !== undefined;\n  const isOpen = isOpenControlled ? controlledOpen : internalOpen;\n\n  // Multi-select helpers\n  const isMultipleMode = props.multiple || Array.isArray(resolvedValue);\n  const selectedValues = isMultipleMode\n    ? Array.isArray(resolvedValue)\n      ? resolvedValue\n      : resolvedValue\n      ? [resolvedValue]\n      : []\n    : [];\n  const singleValue = !isMultipleMode ? resolvedValue : null;\n\n  // Use async options if in async mode, otherwise use provided options\n  const effectiveOptions = asyncMode ? asyncOptions : options;\n\n  // Filter options based on search query\n  const filterOptions = useCallback((opts: GSSelectOption[], query: string) => {\n    if (!query.trim()) return opts;\n    const lowerQuery = query.toLowerCase();\n    return opts.filter(\n      (opt) =>\n        opt.label.toLowerCase().includes(lowerQuery) ||\n        String(opt.value).toLowerCase().includes(lowerQuery)\n    );\n  }, []);\n\n  // Filtered options and groups\n  const filteredOptions =\n    searchable && searchQuery && !asyncMode\n      ? filterOptions(effectiveOptions, searchQuery)\n      : effectiveOptions;\n\n  const filteredOptionGroups =\n    searchable && searchQuery && optionGroups\n      ? optionGroups\n          .map((group) => ({\n            ...group,\n            options: filterOptions(group.options, searchQuery),\n          }))\n          .filter((group) => group.options.length > 0)\n      : optionGroups;\n\n  // Flatten options from groups if using optionGroups\n  const flatOptions = filteredOptionGroups\n    ? filteredOptionGroups.flatMap((group) => group.options)\n    : filteredOptions;\n\n  // Selected options (single or multiple)\n  const selectedOptions = isMultipleMode\n    ? flatOptions.filter((opt) => selectedValues.includes(opt.value))\n    : singleValue !== null\n    ? ([flatOptions.find((opt) => opt.value === singleValue)].filter(\n        Boolean\n      ) as GSSelectOption[])\n    : [];\n\n  const selectedOption = selectedOptions[0] || null;\n  const effectivePlaceholder = placeholder || t(\"placeholder\");\n  const effectiveLoadingMessage = loadingMessage || t(\"loading\");\n  const effectiveEmptyMessage = emptyMessage || t(\"noOptions\");\n  const effectiveSearchPlaceholder = searchPlaceholder || t(\"search\");\n\n  const hasAnyValue = isMultipleMode\n    ? selectedValues.length > 0\n    : resolvedValue !== null &&\n      resolvedValue !== \"\" &&\n      resolvedValue !== undefined;\n\n  // Display value for trigger\n  const displayValue = isMultipleMode\n    ? null // Will render chips instead\n    : renderValue\n    ? renderValue(selectedOption)\n    : selectedOption?.label || effectivePlaceholder;\n\n  const hasError = !!error || validationState === \"error\";\n  const hasSuccess = validationState === \"success\" && !error;\n  const hasWarning = validationState === \"warning\";\n\n  // Get enabled options for keyboard navigation (from flat list)\n  const enabledOptions = flatOptions.filter((opt) => !opt.disabled);\n\n  debugUtils.log(\"Render\", {\n    isOpen,\n    resolvedValue,\n    selectedOption,\n    optionsCount: options.length,\n    enabledOptionsCount: enabledOptions.length,\n      disabled,\n    loading,\n  });\n\n  const componentState = disabled\n    ? \"disabled\"\n    : loading\n    ? \"loading\"\n    : isOpen\n    ? \"open\"\n    : \"idle\";\n\n  // Build class names (CSS Modules - like GSInput)\n  const containerClasses = clsx(\n    styles.selectContainer,\n    // Size classes\n    styles[`size${size.charAt(0).toUpperCase() + size.slice(1)}`], // sizeSm, sizeMd, sizeLg\n    // Variant classes\n    styles[`variant${variant.charAt(0).toUpperCase() + variant.slice(1)}`], // variantOutlined, variantFilled, etc.\n    // Color classes\n    styles[`color${color.charAt(0).toUpperCase() + color.slice(1)}`], // colorPrimary, colorSecondary, etc.\n    // Width mode\n    styles[`width${widthMode.charAt(0).toUpperCase() + widthMode.slice(1)}`], // widthMin, widthAuto, widthFull\n    // State classes\n    {\n      [styles.open]: isOpen,\n      [styles.disabled]: disabled,\n      [styles.loading]: loading,\n      [styles.error]: hasError,\n      [styles.success]: hasSuccess,\n      [styles.warning]: hasWarning,\n      [styles.clearable]: clearable && hasAnyValue,\n      [styles.fullWidth]: fullWidth || widthMode === 'full',\n    },\n    className\n  );\n\n  const dropdownClasses = clsx(\n    styles.selectDropdown,\n    {\n      [styles[\"selectDropdown--upward\"]]: openUpward,\n    },\n    dropdownClassName\n  );\n\n  // ARIA attributes\n  const describedByIds =\n    [ariaDescribedBy, errorId, helperId].filter(Boolean).join(\" \") ||\n    undefined;\n\n  const effectiveAriaLabel =\n    ariaLabel ?? (label ? undefined : t(\"aria.select\"));\n\n  const ariaAttributes = generateAriaAttributes({\n    label: effectiveAriaLabel,\n    labelledBy: ariaLabelledBy || labelId,\n    describedBy: describedByIds,\n    expanded: isOpen,\n    disabled: disabled || loading,\n    hasPopup: \"listbox\",\n    invalid: hasError,\n    required: required || ariaRequired,\n  });\n\n  // Helper to update open state\n  const updateOpenState = useCallback(\n    (newOpen: boolean) => {\n      debugUtils.log(\"updateOpenState\", { from: isOpen, to: newOpen });\n      if (!isOpenControlled) {\n        setInternalOpen(newOpen);\n      }\n      onOpenChange?.(newOpen);\n    },\n    [isOpen, isOpenControlled, onOpenChange, debugUtils]\n  );\n\n  // Event handlers\n  const handleTriggerClick = useCallback(() => {\n    if (!disabled && !loading) {\n      debugUtils.log(\"handleTriggerClick\", { isOpen });\n      updateOpenState(!isOpen);\n    }\n  }, [disabled, loading, isOpen, updateOpenState, debugUtils]);\n\n  const handleOptionClick = useCallback(\n    (optionValue: string | number) => {\n      if (!disabled && !loading) {\n        const option = flatOptions.find((opt) => opt.value === optionValue);\n      if (option && !option.disabled) {\n          debugUtils.log(\"handleOptionClick\", {\n            optionValue,\n            option,\n            isMultipleMode,\n          });\n\n          if (isMultipleMode) {\n            // Multi-select mode: toggle value in array\n            const isSelected = selectedValues.includes(optionValue);\n            let newValues: (string | number)[];\n\n            if (isSelected) {\n              // Remove from selection\n              newValues = selectedValues.filter((v) => v !== optionValue);\n            } else {\n              // Add to selection (check maxSelections)\n              if (\n                props.maxSelections &&\n                selectedValues.length >= props.maxSelections\n              ) {\n                debugUtils.warn(\"Max selections reached\", {\n                  max: props.maxSelections,\n                  current: selectedValues.length,\n                });\n                return;\n              }\n              newValues = [...selectedValues, optionValue];\n            }\n\n            if (!isControlled) {\n              setInternalValue(newValues as any);\n            }\n            onChange?.(newValues as any);\n\n            // Don't close dropdown in multi-select mode\n            debugUtils.log(\"Multi-select updated\", { newValues });\n          } else {\n            // Single-select mode: set value and close\n        if (!isControlled) {\n          setInternalValue(optionValue);\n        }\n        onChange?.(optionValue);\n            updateOpenState(false);\n            triggerRef.current?.focus();\n          }\n        }\n      }\n    },\n    [\n      disabled,\n      loading,\n      isControlled,\n      onChange,\n      flatOptions,\n      updateOpenState,\n      isMultipleMode,\n      selectedValues,\n      props.maxSelections,\n      debugUtils,\n    ]\n  );\n\n  const handleClear = useCallback(\n    (e: React.MouseEvent) => {\n      e.stopPropagation();\n      debugUtils.log(\"handleClear\");\n      if (!disabled && !loading) {\n        const clearValue = isMultipleMode ? [] : (\"\" as any);\n        if (!isControlled) {\n          setInternalValue(clearValue);\n        }\n        onChange?.(clearValue);\n        onClear?.();\n        triggerRef.current?.focus();\n      }\n    },\n    [\n      disabled,\n      loading,\n      isControlled,\n      onChange,\n      onClear,\n      isMultipleMode,\n      debugUtils,\n    ]\n  );\n\n  const handleRemoveChip = useCallback(\n    (chipValue: string | number, e: React.MouseEvent) => {\n      e.stopPropagation();\n      debugUtils.log(\"handleRemoveChip\", { chipValue });\n      if (!disabled && !loading && isMultipleMode) {\n        const newValues = selectedValues.filter((v) => v !== chipValue);\n        if (!isControlled) {\n          setInternalValue(newValues as any);\n        }\n        onChange?.(newValues as any);\n        debugUtils.log(\"Chip removed\", { chipValue, newValues });\n      }\n    },\n    [\n      disabled,\n      loading,\n      isControlled,\n      onChange,\n      isMultipleMode,\n      selectedValues,\n      debugUtils,\n    ]\n  );\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (disabled || loading) return;\n\n      debugUtils.log(\"handleKeyDown\", { key: event.key, isOpen, focusedIndex });\n\n    switch (event.key) {\n        case \"Enter\":\n        case \" \":\n        event.preventDefault();\n          if (!isOpen) {\n            updateOpenState(true);\n            setFocusedIndex(0); // Focus first option when opening with Space/Enter\n          } else if (\n            focusedIndex >= 0 &&\n            focusedIndex < enabledOptions.length\n          ) {\n            // Select focused option\n            const option = enabledOptions[focusedIndex];\n            handleOptionClick(option.value);\n          }\n        break;\n\n        case \"ArrowDown\":\n        event.preventDefault();\n        if (!isOpen) {\n            updateOpenState(true);\n            setFocusedIndex(0);\n        } else {\n            // Move to next option\n            const nextIndex = Math.min(\n              focusedIndex + 1,\n              enabledOptions.length - 1\n            );\n            setFocusedIndex(nextIndex);\n            optionRefs.current[nextIndex]?.scrollIntoView?.({ block: \"nearest\" });\n        }\n        break;\n\n        case \"ArrowUp\":\n        event.preventDefault();\n        if (isOpen) {\n            // Move to previous option\n            const prevIndex = Math.max(focusedIndex - 1, 0);\n            setFocusedIndex(prevIndex);\n            optionRefs.current[prevIndex]?.scrollIntoView?.({ block: \"nearest\" });\n        }\n        break;\n\n        case \"Home\":\n          if (isOpen) {\n            event.preventDefault();\n            setFocusedIndex(0);\n            optionRefs.current[0]?.scrollIntoView?.({ block: \"nearest\" });\n          }\n          break;\n\n        case \"End\":\n          if (isOpen) {\n            event.preventDefault();\n            const lastIndex = enabledOptions.length - 1;\n            setFocusedIndex(lastIndex);\n            optionRefs.current[lastIndex]?.scrollIntoView?.({ block: \"nearest\" });\n          }\n          break;\n\n        case \"Escape\":\n          event.preventDefault();\n          if (isOpen) {\n            updateOpenState(false);\n            setFocusedIndex(-1);\n        triggerRef.current?.focus();\n          }\n        break;\n\n        case \"Tab\":\n          if (isOpen) {\n            updateOpenState(false);\n            setFocusedIndex(-1);\n          }\n          break;\n\n        default:\n          // Typeahead navigation - single character search\n          if (\n            event.key.length === 1 &&\n            !event.ctrlKey &&\n            !event.metaKey &&\n            !event.altKey &&\n            !searchable\n          ) {\n            event.preventDefault();\n\n            // Clear existing timer\n            if (typeaheadTimerRef.current) {\n              clearTimeout(typeaheadTimerRef.current);\n            }\n\n            // Append character to typeahead query\n            const newQuery = typeaheadQuery + event.key.toLowerCase();\n            setTypeaheadQuery(newQuery);\n\n            debugUtils.log(\"Typeahead\", { char: event.key, query: newQuery });\n\n            // Find first option that starts with query (case-insensitive)\n            const matchIndex = enabledOptions.findIndex((opt, idx) => {\n              const label = opt.label.toLowerCase();\n              const matches = label.startsWith(newQuery);\n              // If we're already on a match, find the next one\n              return matches && (idx > focusedIndex || focusedIndex === -1);\n            });\n\n            // If no match after current, wrap around\n            const finalIndex =\n              matchIndex !== -1\n                ? matchIndex\n                : enabledOptions.findIndex((opt) =>\n                    opt.label.toLowerCase().startsWith(newQuery)\n                  );\n\n            if (finalIndex !== -1) {\n              setFocusedIndex(finalIndex);\n              optionRefs.current[finalIndex]?.scrollIntoView?.({\n                block: \"nearest\",\n              });\n\n              // If not open, open dropdown and select\n              if (!isOpen) {\n                updateOpenState(true);\n              }\n\n              debugUtils.log(\"Typeahead match found\", {\n                query: newQuery,\n                index: finalIndex,\n                option: enabledOptions[finalIndex],\n              });\n            }\n\n            // Reset typeahead after 1 second of no typing\n            typeaheadTimerRef.current = window.setTimeout(() => {\n              setTypeaheadQuery(\"\");\n              debugUtils.log(\"Typeahead query reset\");\n            }, 1000);\n          }\n          break;\n      }\n    },\n    [\n      disabled,\n      loading,\n      isOpen,\n      focusedIndex,\n      enabledOptions,\n      updateOpenState,\n      handleOptionClick,\n      searchable,\n      typeaheadQuery,\n      debugUtils,\n    ]\n  );\n\n  // Click outside to close + Escape key\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        triggerRef.current &&\n        dropdownRef.current &&\n        !triggerRef.current.contains(event.target as Node) &&\n        !dropdownRef.current.contains(event.target as Node)\n      ) {\n        debugUtils.log(\"Click outside detected\");\n        updateOpenState(false);\n        setFocusedIndex(-1);\n      }\n    };\n\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\") {\n        debugUtils.log(\"Escape key pressed\");\n        updateOpenState(false);\n        setFocusedIndex(-1);\n        triggerRef.current?.focus();\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    document.addEventListener(\"keydown\", handleEscape);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      document.removeEventListener(\"keydown\", handleEscape);\n    };\n  }, [isOpen, updateOpenState, debugUtils]);\n\n  // Reset focused index when dropdown closes\n  useEffect(() => {\n    if (!isOpen) {\n      setFocusedIndex(-1);\n      setOpenUpward(false);\n      setSearchQuery(\"\"); // Clear search on close\n      setAlignmentOffset(0); // Reset alignment\n    }\n  }, [isOpen]);\n\n  // Focus search input when dropdown opens (if searchable)\n  useEffect(() => {\n    if (isOpen && searchable && searchInputRef.current) {\n      requestAnimationFrame(() => {\n        searchInputRef.current?.focus();\n        debugUtils.log(\"Search input focused\");\n      });\n    }\n  }, [isOpen, searchable, debugUtils]);\n\n  // Cleanup typeahead timer\n  useEffect(() => {\n    return () => {\n      if (typeaheadTimerRef.current) {\n        clearTimeout(typeaheadTimerRef.current);\n      }\n      if (asyncDebounceTimerRef.current) {\n        clearTimeout(asyncDebounceTimerRef.current);\n      }\n    };\n  }, []);\n\n  // Async loading of options\n  useEffect(() => {\n    if (!asyncMode || !loadOptions) return;\n\n    // Clear existing timer\n    if (asyncDebounceTimerRef.current) {\n      clearTimeout(asyncDebounceTimerRef.current);\n    }\n\n    // Debounce the async call\n    asyncDebounceTimerRef.current = window.setTimeout(async () => {\n      setIsLoadingAsync(true);\n      setAsyncError(null);\n\n      debugUtils.log(\"Async loading started\", { query: searchQuery });\n\n      try {\n        const loadedOptions = await loadOptions(searchQuery);\n        setAsyncOptions(loadedOptions);\n        setIsLoadingAsync(false);\n        debugUtils.log(\"Async loading success\", {\n          count: loadedOptions.length,\n          query: searchQuery,\n        });\n      } catch (error) {\n        setIsLoadingAsync(false);\n        setAsyncError(\n          error instanceof Error ? error.message : \"Failed to load options\"\n        );\n        debugUtils.error(\"Async loading failed\", error);\n      }\n    }, debounceTime);\n\n    return () => {\n      if (asyncDebounceTimerRef.current) {\n        clearTimeout(asyncDebounceTimerRef.current);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [asyncMode, loadOptions, searchQuery, debounceTime]); // debugUtils removed to prevent infinite loop\n\n  // Auto-positioning: Detect if should open upward\n  useEffect(() => {\n    if (!isOpen || !triggerRef.current) {\n      return;\n    }\n\n    requestAnimationFrame(() => {\n      if (!triggerRef.current) return;\n\n      const triggerRect = triggerRef.current.getBoundingClientRect();\n      const dropdownHeight = typeof maxHeight === \"number\" ? maxHeight : 300;\n      const viewportPadding = 16; // 16px padding from viewport edges\n\n      const spaceBelow =\n        window.innerHeight - triggerRect.bottom - viewportPadding;\n      const spaceAbove = triggerRect.top - viewportPadding;\n\n      // Open upward if:\n      // 1. Not enough space below for dropdown\n      // 2. More space above than below\n      const shouldOpenUpward =\n        spaceBelow < Math.min(dropdownHeight, 150) && spaceAbove > spaceBelow;\n\n      debugUtils.log(\"Auto-positioning\", {\n        spaceBelow,\n        spaceAbove,\n        dropdownHeight,\n        shouldOpenUpward,\n        triggerTop: triggerRect.top,\n        triggerBottom: triggerRect.bottom,\n        viewportHeight: window.innerHeight,\n      });\n\n      setOpenUpward(shouldOpenUpward);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, maxHeight]); // Removed debugUtils to prevent loop\n\n  // Calculate alignment offset (BaseUI style - using CSS transform)\n  useEffect(() => {\n    if (\n      !isOpen ||\n      !alignSelectedToTrigger ||\n      !triggerRef.current ||\n      !dropdownRef.current\n    ) {\n      setAlignmentOffset(0);\n      return;\n    }\n\n    // Wait for dropdown and options to render\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        if (!triggerRef.current || !dropdownRef.current) return;\n\n        // Find selected option index in enabled options\n        const selectedIndex = enabledOptions.findIndex((opt) =>\n          isMultipleMode\n            ? selectedValues.includes(opt.value)\n            : opt.value === singleValue\n        );\n\n        if (\n          selectedIndex === -1 ||\n          selectedIndex >= optionRefs.current.length\n        ) {\n          setAlignmentOffset(0);\n          return;\n        }\n\n        const selectedOptionEl = optionRefs.current[selectedIndex];\n        if (!selectedOptionEl) {\n          setAlignmentOffset(0);\n          return;\n        }\n\n        // Get trigger position in viewport\n        const triggerRect = triggerRef.current.getBoundingClientRect();\n        // const dropdownRect = dropdownRef.current.getBoundingClientRect(); // unused\n\n        // CRITICAL FIX: Use offsetTop for scroll-independent positioning\n        // offsetTop gives position within parent, regardless of scroll state\n        let optionOffsetInDropdown = selectedOptionEl.offsetTop;\n\n        // Walk up the tree to accumulate offsets from parent containers\n        let offsetParent = selectedOptionEl.offsetParent;\n\n        while (offsetParent && offsetParent !== dropdownRef.current) {\n          if (offsetParent instanceof HTMLElement) {\n            optionOffsetInDropdown += offsetParent.offsetTop;\n            offsetParent = offsetParent.offsetParent;\n          } else {\n            break;\n          }\n        }\n\n        // Calculate max scroll (can't scroll beyond content)\n        const maxScroll = Math.max(\n          0,\n          dropdownRef.current.scrollHeight - dropdownRef.current.clientHeight\n        );\n        \n        // CENTER SELECTED OPTION: Calculate scroll to position option in the middle\n        // Formula: optionTop - (visibleHeight / 2) + (optionHeight / 2)\n        const dropdownVisibleHeight = dropdownRef.current.clientHeight;\n        const optionHeight = selectedOptionEl.offsetHeight;\n        const centerOffset = dropdownVisibleHeight / 2 - optionHeight / 2;\n        \n        // Target scroll to center the option (with bounds)\n        const idealCenterScroll = optionOffsetInDropdown - centerOffset;\n        const targetScroll = Math.max(0, Math.min(idealCenterScroll, maxScroll));\n\n        debugUtils.log(\"offsetTop calculation (CENTERED)\", {\n          selectedOptionOffsetTop: selectedOptionEl.offsetTop,\n          accumulatedOffset: optionOffsetInDropdown,\n          optionHeight: `${optionHeight}px`,\n          dropdownVisibleHeight: `${dropdownVisibleHeight}px`,\n          centerOffset: `${centerOffset.toFixed(2)}px`,\n          idealCenterScroll: `${idealCenterScroll.toFixed(2)}px`,\n          maxScroll: `${maxScroll}px`,\n          targetScroll: `${targetScroll.toFixed(2)}px`,\n          strategy: 'Center option in visible area',\n        });\n\n        // Scroll the dropdown so selected option is centered (when possible)\n        // This creates context with options visible before and after\n        dropdownRef.current.scrollTop = targetScroll;\n\n        // Measure positions AFTER scrolling to selected option\n        const optionRect = selectedOptionEl.getBoundingClientRect();\n        const dropdownRectAfterScroll = dropdownRef.current.getBoundingClientRect();\n\n        // Now option should be centered (or as close as possible) in the visible area\n        // Calculate how much more we need to move dropdown to align option with trigger\n        const optionVisibleOffset = optionRect.top - dropdownRectAfterScroll.top;\n\n        // Calculate offset to align option with trigger\n        // Formula: offset = triggerTop - dropdownTop - optionVisibleOffset\n        const triggerToDropdownGap = dropdownRectAfterScroll.top - triggerRect.bottom;\n        let offset = triggerRect.top - dropdownRectAfterScroll.top - optionVisibleOffset;\n\n        // Viewport bounds protection\n        const viewportPadding = 8;\n        const dropdownHeight = dropdownRef.current.scrollHeight; // Total height (not just visible)\n        const visibleHeight = Math.min(\n          dropdownHeight,\n          (maxHeight as number) || 300\n        );\n\n        // Calculate where dropdown would end up after transform\n        const finalDropdownTop = dropdownRectAfterScroll.top + offset;\n        const finalDropdownBottom = finalDropdownTop + visibleHeight;\n\n        // If would go above viewport, clamp to top\n        if (finalDropdownTop < viewportPadding) {\n          offset = -(dropdownRectAfterScroll.top - viewportPadding);\n        }\n\n        // If would go below viewport, clamp to bottom\n        if (finalDropdownBottom > window.innerHeight - viewportPadding) {\n          const excessBottom =\n            finalDropdownBottom - (window.innerHeight - viewportPadding);\n          offset -= excessBottom;\n        }\n\n        debugUtils.log(\"Alignment calculated (BaseUI style - CENTERED)\", {\n          selectedIndex,\n          selectedOption: enabledOptions[selectedIndex].label,\n          // Measurements\n          triggerTop: `${triggerRect.top.toFixed(2)}px`,\n          triggerBottom: `${triggerRect.bottom.toFixed(2)}px`,\n          dropdownTop: `${dropdownRectAfterScroll.top.toFixed(2)}px`,\n          triggerToDropdownGap: `${triggerToDropdownGap.toFixed(2)}px`,\n          optionOffsetInDropdown: `${optionOffsetInDropdown.toFixed(2)}px`,\n          // Scroll strategy\n          scrollStrategy: \"Center option in visible area, then align to trigger\",\n          appliedScrollTop: `${targetScroll.toFixed(2)}px`,\n          maxScroll: `${maxScroll}px`,\n          dropdownScrollHeight: `${dropdownRef.current.scrollHeight}px`,\n          dropdownClientHeight: `${dropdownRef.current.clientHeight}px`,\n          visibleHeight: `${visibleHeight}px`,\n          // After scroll - where is option now?\n          optionVisibleOffset: `${optionVisibleOffset.toFixed(2)}px`,\n          // Offset calculation\n          calculationFormula: `triggerTop - dropdownTop - optionVisibleOffset`,\n          calculationValues: `${triggerRect.top.toFixed(\n            2\n          )} - ${dropdownRectAfterScroll.top.toFixed(2)} - ${optionVisibleOffset.toFixed(\n            2\n          )}`,\n          calculatedOffset: `${(\n            triggerRect.top -\n            dropdownRectAfterScroll.top -\n            optionVisibleOffset\n          ).toFixed(2)}px`,\n          finalOffset: `${offset.toFixed(2)}px`,\n          viewportClamped:\n            offset !== triggerRect.top - dropdownRectAfterScroll.top - optionVisibleOffset,\n          // Final positions\n          finalDropdownTop: `${finalDropdownTop.toFixed(2)}px`,\n          finalDropdownBottom: `${finalDropdownBottom.toFixed(2)}px`,\n          viewportHeight: `${window.innerHeight}px`,\n          viewportPadding: `${viewportPadding}px`,\n        });\n\n        setAlignmentOffset(offset);\n\n        // IMPORTANT: Scroll stays at targetScroll position!\n        // This centers the selected option with context (options above and below)\n        // Combined with transform, this creates perfect alignment while maintaining context\n      });\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, alignSelectedToTrigger]); // Only run when dropdown opens/closes\n\n  // Render clear button (helper)\n  const renderClearButton = () => {\n    if (!clearable) {\n      return null;\n    }\n    \n    if (disabled) {\n      return null;\n    }\n\n    // Check if there's a value to clear\n    if (!hasAnyValue) {\n      debugUtils.log('Clear button hidden - no value', { \n        resolvedValue, \n        isMultipleMode, \n        selectedValues \n      });\n      return null;\n    }\n\n    debugUtils.log('Clear button rendered', { \n      resolvedValue, \n      hasValue: hasAnyValue,\n      clearButtonOutside \n    });\n\n    return (\n      <ButtonBase\n        type=\"button\"\n        className={styles.selectClearButton}\n        onClick={handleClear}\n        aria-label={t(\"aria.clear\")}\n        tabIndex={-1}\n        data-gs-el=\"clear\"\n      >\n        <GSIcon name=\"close\" size={1} />\n      </ButtonBase>\n    );\n  };\n\n  // Render validation icon (helper)\n  const renderValidationIcon = () => {\n    // Always show error icon when there's an error (with tooltip)\n    if (error) {\n      return (\n        <GSTooltip\n          content={error}\n          placement=\"top\"\n          trigger=\"hover\"\n          enterDelay={200}\n          color=\"danger\"\n        >\n          <span\n            className={clsx(styles.selectValidationIcon, styles[\"selectValidationIcon--error\"])}\n            data-gs-el=\"validationIcon\"\n            role=\"alert\"\n            aria-label={error}\n            tabIndex={0}\n          >\n            <GSIcon name=\"alert-circle\" size=\"sm\" />\n          </span>\n        </GSTooltip>\n      );\n    }\n\n    // Show success/warning icons only if showValidationIcon is enabled\n    if (!showValidationIcon || !(hasSuccess || hasWarning)) {\n      return null;\n    }\n\n    return (\n      <span\n        className={clsx(styles.selectValidationIcon, {\n          [styles[\"selectValidationIcon--success\"]]: hasSuccess,\n          [styles[\"selectValidationIcon--warning\"]]: hasWarning,\n        })}\n        data-gs-el=\"validationIcon\"\n      >\n        <GSIcon\n          name={\n            hasSuccess\n              ? \"check-circle\"\n              : \"alert-outline\"\n          }\n          size=\"sm\"\n        />\n      </span>\n    );\n  };\n\n  // Render loading spinner (helper)\n  const renderLoadingSpinner = () => {\n    if (!loading) return null;\n\n    const showText = loadingPosition !== \"inside\";\n\n    return (\n      <span className={styles.selectLoadingSpinner} data-gs-el=\"loading\">\n        <GSLoading\n          mode=\"section\"\n          variant=\"transparent\"\n          title={null}\n          description={null}\n          message={showText ? effectiveLoadingMessage : null}\n          ariaLabel={effectiveLoadingMessage}\n          ariaLive=\"polite\"\n          showBackdrop={false}\n          spinnerProps={{ size: 'sm', color: color === 'secondary' ? 'primary' : color }}\n          className={clsx(styles.inlineLoading, {\n            [styles.inlineLoadingNoText]: !showText,\n          })}\n          style={{ padding: 0, minHeight: 0, width: 'auto' }}\n        />\n        {!showText && (\n          <span className=\"gs-sr-only\">{effectiveLoadingMessage}</span>\n        )}\n      </span>\n    );\n  };\n\n  // Render trigger\n  const renderTrigger = () => {\n    const hasValidationIconInside =\n      showValidationIcon &&\n      !validationIconOutside &&\n      (hasError || hasSuccess || hasWarning);\n    const hasClearButtonInside =\n      clearable && !clearButtonOutside && hasAnyValue && !disabled;\n\n    return (\n    <div\n      ref={triggerRef}\n      id={baseId}\n      className={clsx(\n        styles.selectField, \n        {\n          [styles.disabled]: disabled,\n          [styles.loading]: loading && !disabled,\n          [styles['selectField--withValidationIcon']]: hasValidationIconInside,\n          [styles['selectField--withClearButton']]: hasClearButtonInside,\n        },\n        selectClassName\n      )}\n      onClick={handleTriggerClick}\n      onKeyDown={handleKeyDown}\n      tabIndex={disabled || loading ? -1 : 0}\n      role=\"combobox\"\n      aria-controls={isOpen ? `${baseId}-listbox` : undefined}\n      aria-activedescendant={\n        isOpen && focusedIndex >= 0\n          ? `${baseId}-option-${focusedIndex}`\n          : undefined\n      }\n      data-gs=\"GSSelect\"\n      data-gs-el=\"trigger\"\n      data-gs-size={size}\n      data-gs-variant={variant}\n      data-gs-color={color}\n      data-gs-state={componentState}\n      data-gs-has-value={hasAnyValue ? \"true\" : undefined}\n      data-gs-disabled={disabled ? \"true\" : undefined}\n      data-gs-loading={loading ? \"true\" : undefined}\n      data-gs-debug={debug ? \"true\" : undefined}\n      {...ariaAttributes}\n    >\n      {/* Start Decorator */}\n      {startDecorator && (\n        <span\n          className={styles.selectStartDecorator}\n          data-gs-el=\"startDecorator\"\n        >\n          {startDecorator}\n        </span>\n      )}\n\n      {/* Display Value */}\n      <div\n        className={clsx(styles.selectInput, {\n          [styles.selectPlaceholder]: selectedOptions.length === 0,\n          [styles[\"selectInput--multiple\"]]: isMultipleMode,\n        })}\n        data-gs-el=\"value\"\n      >\n        {/* Multi-select: Render chips */}\n        {isMultipleMode ? (\n          selectedOptions.length > 0 ? (\n            <div className={styles.selectChips} data-gs-el=\"chips\">\n              {selectedOptions.map((opt) => (\n                <span\n                  key={String(opt.value)}\n                  className={styles.selectChip}\n                  data-gs-el=\"chip\"\n                >\n                  <span className={styles.selectChipLabel}>{opt.label}</span>\n                  <ButtonBase\n                    type=\"button\"\n                    className={styles.selectChipRemove}\n                    onClick={(e) => handleRemoveChip(opt.value, e)}\n                    aria-label={`Remove ${opt.label}`}\n                    tabIndex={-1}\n                    data-gs-el=\"chip-remove\"\n                  >\n                    <GSIcon name=\"close\" size={1} />\n                  </ButtonBase>\n                </span>\n              ))}\n      </div>\n          ) : (\n            effectivePlaceholder\n          )\n        ) : (\n          /* Single-select: Display text */\n          displayValue\n        )}\n      </div>\n\n      {/* End Decorator */}\n      {endDecorator && (\n        <span className={styles.selectEndDecorator} data-gs-el=\"endDecorator\">\n          {endDecorator}\n        </span>\n      )}\n\n      {/* Clear Button (INSIDE - before validation icon) */}\n      {!clearButtonOutside && renderClearButton()}\n\n      {/* Validation Icon (INSIDE - after clear, before loading/chevron) */}\n      {!validationIconOutside && renderValidationIcon()}\n\n      {/* Loading Spinner (INSIDE - replaces chevron) OR Chevron Icon */}\n      {loading && loadingPosition === 'inside' ? (\n        renderLoadingSpinner()\n      ) : (\n        <span className={styles.selectIcon} data-gs-el=\"icon\">\n        <ChevronUpDownIcon />\n      </span>\n      )}\n    </div>\n  );\n  };\n\n  // Render single option\n  const renderSingleOption = (\n    option: GSSelectOption,\n    index: number,\n    groupIndex?: number\n  ) => {\n    const isSelected = isMultipleMode\n      ? selectedValues.includes(option.value)\n      : option.value === singleValue;\n    const isFocused =\n      focusedIndex ===\n      enabledOptions.findIndex((o) => o.value === option.value);\n    const optionId =\n      groupIndex !== undefined\n        ? `${baseId}-group-${groupIndex}-option-${index}`\n        : `${baseId}-option-${index}`;\n\n    return (\n          <div\n            key={String(option.value)}\n        ref={(el) => {\n          if (!option.disabled) {\n            const enabledIndex = enabledOptions.findIndex(\n              (o) => o.value === option.value\n            );\n            optionRefs.current[enabledIndex] = el;\n          }\n        }}\n            className={clsx(styles.selectOption, {\n          [styles[\"selectOption--selected\"]]: isSelected,\n          [styles[\"selectOption--disabled\"]]: option.disabled,\n          [styles[\"selectOption--focused\"]]: isFocused,\n            })}\n            role=\"option\"\n        id={optionId}\n        aria-selected={isSelected}\n            aria-disabled={option.disabled}\n            onClick={() => handleOptionClick(option.value)}\n        onMouseEnter={() => {\n          if (!option.disabled) {\n            const enabledIndex = enabledOptions.findIndex(\n              (o) => o.value === option.value\n            );\n            setFocusedIndex(enabledIndex);\n          }\n        }}\n        tabIndex={-1}\n        data-gs-el=\"option\"\n        data-value={option.value}\n      >\n        {renderOption ? (\n          renderOption(option, isSelected)\n        ) : (\n          <>\n            {/* Multi-select mode: show checkbox */}\n            {isMultipleMode && (\n              <span\n                className={clsx(styles.selectOptionCheckbox, {\n                  [styles[\"selectOptionCheckbox--checked\"]]: isSelected,\n                })}\n                data-gs-el=\"checkbox\"\n              >\n                <GSIcon\n                  name={\n                    isSelected\n                      ? \"checkbox-marked\"\n                      : \"checkbox-blank-outline\"\n                  }\n                  size=\"sm\"\n                />\n              </span>\n            )}\n\n            {option.label}\n\n            {/* Single-select mode: show checkmark */}\n            {!isMultipleMode && isSelected && (\n              <span className={styles.selectOptionCheck} data-gs-el=\"check\">\n                <CheckIcon />\n              </span>\n            )}\n          </>\n            )}\n          </div>\n    );\n  };\n\n  // Render dropdown\n  const renderDropdown = () => {\n    if (!isOpen) return null;\n\n    // Dropdown style with alignment offset (BaseUI style)\n    const dropdownStyle: React.CSSProperties = {\n      maxHeight: maxHeight || 300,\n      // Apply transform to align selected option with trigger\n      // Only apply transform after alignment is calculated (not 0)\n      ...(alignSelectedToTrigger && {\n        transform:\n          alignmentOffset !== 0 ? `translateY(${alignmentOffset}px)` : \"none\",\n        // No transition on initial render to avoid jumping\n        // Transition only applies on subsequent changes\n        transition: alignmentOffset !== 0 ? \"none\" : undefined,\n      }),\n    };\n\n    // Loading state (async)\n    if (isLoadingAsync) {\n      return (\n        <div\n          ref={dropdownRef}\n          className={dropdownClasses}\n          role=\"listbox\"\n          id={`${baseId}-listbox`}\n          data-gs-el=\"dropdown\"\n          style={dropdownStyle}\n        >\n          <div className={styles.selectLoadingState} data-gs-el=\"loading\">\n            <GSLoading\n              mode=\"section\"\n              variant=\"transparent\"\n              title={null}\n              description={null}\n              message={effectiveLoadingMessage}\n              ariaLabel={effectiveLoadingMessage}\n              ariaLive=\"polite\"\n              showBackdrop={false}\n              spinnerProps={{ size: 'sm', color: color === 'secondary' ? 'primary' : color }}\n              className={styles.dropdownLoading}\n              style={{ padding: 0, minHeight: 0, width: 'auto' }}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    // Error state (async)\n    if (asyncError) {\n      return (\n        <div\n          ref={dropdownRef}\n          className={dropdownClasses}\n          role=\"listbox\"\n          id={`${baseId}-listbox`}\n          data-gs-el=\"dropdown\"\n          style={dropdownStyle}\n        >\n          <div className={styles.selectErrorState} data-gs-el=\"async-error\">\n            <GSIcon name=\"alert-circle\" size={1} />\n            <span>{asyncError}</span>\n          </div>\n        </div>\n      );\n    }\n\n    // Empty state\n    if (flatOptions.length === 0) {\n      return (\n        <div\n          ref={dropdownRef}\n          className={dropdownClasses}\n          role=\"listbox\"\n          id={`${baseId}-listbox`}\n          data-gs-el=\"dropdown\"\n          style={dropdownStyle}\n        >\n          <div className={styles.selectEmptyState} data-gs-el=\"empty\">\n            {effectiveEmptyMessage}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div\n        ref={dropdownRef}\n        className={dropdownClasses}\n        role=\"listbox\"\n        id={`${baseId}-listbox`}\n        aria-labelledby={label ? labelId : undefined}\n        data-gs-el=\"dropdown\"\n        style={dropdownStyle}\n      >\n        {/* Search Input */}\n        {searchable && (\n          <div\n            className={styles.selectSearchWrapper}\n            data-gs-el=\"search-wrapper\"\n          >\n            <GSIcon\n              name=\"magnify\"\n              size=\"sm\"\n              style={{\n                position: \"absolute\",\n                left: \"0.75rem\",\n                top: \"50%\",\n                transform: \"translateY(-50%)\",\n                color: \"var(--color-neutral-500)\",\n                pointerEvents: \"none\",\n              }}\n            />\n            <input\n              ref={searchInputRef}\n              type=\"text\"\n              className={styles.selectSearchInput}\n              placeholder={effectiveSearchPlaceholder}\n              aria-label={effectiveSearchPlaceholder}\n              value={searchQuery}\n              onChange={(e) => {\n                const query = e.target.value;\n                setSearchQuery(query);\n                onSearch?.(query);\n                setFocusedIndex(0); // Reset to first option\n                debugUtils.log(\"Search query changed\", { query });\n              }}\n              onKeyDown={(e) => {\n                // Prevent dropdown closing on space in search\n                if (e.key === \" \") {\n                  e.stopPropagation();\n                }\n                // Arrow down moves to options\n                if (e.key === \"ArrowDown\") {\n                  e.preventDefault();\n                  setFocusedIndex(0);\n                  optionRefs.current[0]?.scrollIntoView?.({ block: \"nearest\" });\n                }\n                // Escape clears search or closes dropdown\n                if (e.key === \"Escape\") {\n                  e.stopPropagation();\n                  if (searchQuery) {\n                    setSearchQuery(\"\");\n                    debugUtils.log(\"Search cleared via Escape\");\n                  } else {\n                    updateOpenState(false);\n                  }\n                }\n              }}\n              onClick={(e) => e.stopPropagation()}\n              data-gs-el=\"search-input\"\n            />\n            {searchQuery && (\n              <ButtonBase\n                type=\"button\"\n                className={styles.selectSearchClear}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setSearchQuery(\"\");\n                  searchInputRef.current?.focus();\n                  debugUtils.log(\"Search cleared via button\");\n                }}\n                aria-label=\"Clear search\"\n                tabIndex={-1}\n                data-gs-el=\"search-clear\"\n              >\n                <GSIcon name=\"close\" size={1} />\n              </ButtonBase>\n            )}\n          </div>\n        )}\n\n        {/* Render with groups */}\n        {filteredOptionGroups\n          ? filteredOptionGroups.map((group, groupIndex) => (\n              <div\n                key={`group-${groupIndex}`}\n                className={styles.selectGroup}\n                data-gs-el=\"group\"\n              >\n                <div\n                  className={styles.selectGroupLabel}\n                  data-gs-el=\"groupLabel\"\n                  role=\"presentation\"\n                >\n                  {group.label}\n                </div>\n                {group.options.map((option, optionIndex) =>\n                  renderSingleOption(option, optionIndex, groupIndex)\n                )}\n              </div>\n            ))\n          : /* Render without groups */\n            filteredOptions.map((option, index) =>\n              renderSingleOption(option, index)\n            )}\n      </div>\n    );\n  };\n\n  // Render with label/error/helper\n  if (label || error || helperText) {\n    return (\n      <div\n        ref={ref}\n        className={containerClasses}\n        data-gs=\"GSSelect\"\n        data-gs-el=\"root\"\n        data-gs-size={size}\n        data-gs-variant={variant}\n        data-gs-color={color}\n        data-gs-width={widthMode}\n        data-gs-state={componentState}\n        data-gs-has-value={hasAnyValue ? \"true\" : undefined}\n        data-gs-disabled={disabled ? \"true\" : undefined}\n        data-gs-loading={loading ? \"true\" : undefined}\n        data-gs-debug={debug ? \"true\" : undefined}\n      >\n        {label && (\n          <div className={styles.selectLabelContainer} data-gs-el=\"labelContainer\">\n            <label\n              htmlFor={baseId}\n              id={labelId}\n              className={clsx(styles.selectLabel, labelClassName, {\n                [styles.selectLabelRequired]: required,\n              })}\n              data-gs-el=\"label\"\n            >\n              {label}\n            </label>\n            {helperText && (\n              <GSTooltip\n                content={helperText}\n                placement=\"top\"\n                trigger=\"hover\"\n                enterDelay={200}\n              >\n                <span\n                  className={styles.selectHelperIcon}\n                  aria-label={t('aria.helperText')}\n                  role=\"button\"\n                  tabIndex={0}\n                >\n                  <GSIcon name=\"help-circle\" size=\"sm\" />\n                </span>\n              </GSTooltip>\n            )}\n          </div>\n        )}\n\n        <div className={styles.selectWrapper} data-gs-el=\"wrapper\">\n          <div className={styles.selectTriggerWrapper} data-gs-el=\"triggerWrapper\">\n          {renderTrigger()}\n            {/* Clear Button (OUTSIDE - before validation) */}\n            {clearButtonOutside && renderClearButton()}\n            {/* Validation Icon (OUTSIDE - after clear, before loading) */}\n            {validationIconOutside && renderValidationIcon()}\n            {/* Loading Spinner (OUTSIDE - after trigger) */}\n            {loading && loadingPosition === 'outside' && renderLoadingSpinner()}\n          </div>\n          {renderDropdown()}\n        </div>\n\n      </div>\n    );\n  }\n\n  // Render without label\n  return (\n    <div\n      ref={ref}\n      className={containerClasses}\n      data-gs=\"GSSelect\"\n      data-gs-el=\"root\"\n      data-gs-size={size}\n      data-gs-variant={variant}\n      data-gs-color={color}\n      data-gs-width={widthMode}\n      data-gs-state={componentState}\n      data-gs-has-value={hasAnyValue ? \"true\" : undefined}\n      data-gs-disabled={disabled ? \"true\" : undefined}\n      data-gs-loading={loading ? \"true\" : undefined}\n      data-gs-debug={debug ? \"true\" : undefined}\n    >\n      <div className={styles.selectWrapper} data-gs-el=\"wrapper\">\n        <div className={styles.selectTriggerWrapper} data-gs-el=\"triggerWrapper\">\n      {renderTrigger()}\n          {/* Clear Button (OUTSIDE - before validation) */}\n          {clearButtonOutside && renderClearButton()}\n          {/* Validation Icon (OUTSIDE - after clear, before loading) */}\n          {validationIconOutside && renderValidationIcon()}\n          {/* Loading Spinner (OUTSIDE - after trigger) */}\n          {loading && loadingPosition === 'outside' && renderLoadingSpinner()}\n        </div>\n      {renderDropdown()}\n      </div>\n    </div>\n  );\n};\n\nconst GSSelect = forwardRef(GSSelectComponent);\nGSSelect.displayName = \"GSSelect\";\n\n// Icons for the Select component\nconst ChevronUpDownIcon = (props: React.ComponentProps<\"svg\">) => (\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M4 6L8 10L12 6\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\nconst CheckIcon = (props: React.ComponentProps<\"svg\">) => (\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M13.5 4.5L6 12L2.5 8.5\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\nexport default GSSelect;\n","{\r\n  \"label\": \"Select\",\r\n  \"placeholder\": \"Select an option\",\r\n  \"noOptions\": \"No options available\",\r\n  \"loading\": \"Loading options...\",\r\n  \"search\": \"Search...\",\r\n  \"aria\": {\r\n    \"select\": \"Select field\",\r\n    \"expanded\": \"Expanded\",\r\n    \"collapsed\": \"Collapsed\",\r\n    \"required\": \"Required field\",\r\n    \"clear\": \"Clear selection\",\r\n    \"open\": \"Open dropdown\",\r\n    \"close\": \"Close dropdown\",\r\n    \"selected\": \"Selected\",\r\n    \"helperText\": \"Helper text\"\r\n  }\r\n}\r\n","{\r\n  \"label\": \"Seleo\",\r\n  \"placeholder\": \"Selecionar uma opo\",\r\n  \"noOptions\": \"Nenhuma opo disponvel\",\r\n  \"loading\": \"A carregar opes...\",\r\n  \"search\": \"Procurar...\",\r\n  \"aria\": {\r\n    \"select\": \"Campo de seleo\",\r\n    \"expanded\": \"Expandido\",\r\n    \"collapsed\": \"Recolhido\",\r\n    \"required\": \"Campo obrigatrio\",\r\n    \"clear\": \"Limpar seleo\",\r\n    \"open\": \"Abrir lista\",\r\n    \"close\": \"Fechar lista\",\r\n    \"selected\": \"Selecionado\",\r\n    \"helperText\": \"Texto de ajuda\"\r\n  }\r\n}\r\n","import type { i18n } from 'i18next';\r\nimport en from './i18n/en.json';\r\nimport pt from './i18n/pt.json';\r\n\r\nexport const GS_SELECT_NAMESPACE = 'gsselect';\r\n\r\nexport function registerGSSelectI18n(instance: i18n) {\r\n\ttry {\r\n\t\tinstance.addResourceBundle('en', GS_SELECT_NAMESPACE, en as any, true, true);\r\n\t\tinstance.addResourceBundle('pt', GS_SELECT_NAMESPACE, pt as any, true, true);\r\n\t} catch (_e) {\r\n\t\t// ignore in non-bundled environments\r\n\t}\r\n}\r\n","/* GSSelect Styles - GS Style Implementation */\n\n.select {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.selectLabel {\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-foreground);\n  line-height: var(--line-height-tight);\n}\n\n.selectLabel--required::after {\n  content: ' *';\n  color: var(--color-danger-500);\n}\n\n/* FIELD is the actual visual container (like GSInput wrapper) */\n.selectField {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  border: 1px solid var(--color-neutral-200);\n  border-radius: var(--radius-md, 0.375rem);\n  background-color: var(--background-surface);\n  color: var(--text-primary);\n  font-size: inherit;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  /* Padronizado com GSInput */\n  --gs-input-height: 2.25rem;\n  min-height: var(--gs-input-height);\n  height: var(--gs-input-height);\n  box-sizing: border-box;\n}\n\n.selectField:hover {\n  border-color: var(--color-neutral-300);\n}\n\n.selectField:focus-within {\n  outline: none;\n  border-color: var(--color-primary-500);\n  box-shadow: 0 0 0 2px var(--color-primary-700);\n}\n\n/* Disabled field styling (CSS Module class) - matches GSInput wrapper.disabled */\n.selectField.disabled {\n  background-color: var(--color-neutral-700) !important;\n  border-color: var(--color-neutral-300) !important;\n  color: var(--text-disabled, #9ca3af) !important;\n  cursor: not-allowed;\n  pointer-events: none;\n  opacity: 0.6;\n}\n\n.selectField.disabled .selectInput {\n  background-color: transparent;\n  color: var(--text-disabled, #9ca3af);\n}\n\n/* Hide icons in disabled field */\n.selectField.disabled .selectIcon,\n.selectField.disabled .selectValidationIcon,\n.selectField.disabled .selectLoadingSpinner,\n.selectField.disabled .selectClearButton {\n  display: none;\n}\n\n/* Dim decorators in disabled field */\n.selectField.disabled .selectStartDecorator,\n.selectField.disabled .selectEndDecorator {\n  opacity: 0.6;\n}\n\n.selectField.loading {\n  cursor: wait;\n  opacity: 0.7;\n}\n\n/* INPUT is just the text display (no border, no background) */\n.selectInput {\n  flex: 1;\n  background: none;\n  border: none;\n  color: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  cursor: inherit;\n  /* Padronizado com GSInput */\n  padding: 0.5rem 0.75rem;\n  margin: 0;\n  outline: none;\n}\n\n/* Padding adjustments happen at size level, icons are absolutely positioned */\n\n/* Error state on input text (just color, no border) */\n.selectInput--error {\n  color: var(--color-danger-700);\n}\n\n.selectIcon {\n  position: absolute;\n  /* Ajustado para considerar padding do input (0.75rem = 12px) + espao para cone */\n  right: 0.25rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--color-neutral-500);\n  pointer-events: none;\n  transition: transform 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* Open state - rotate icon */\n.selectContainer.open .selectIcon {\n  transform: translateY(-50%) rotate(180deg);\n}\n\n.selectHelperText {\n  font-size: var(--font-size-xs);\n  line-height: var(--line-height-tight);\n  color: var(--color-neutral-600);\n  margin-top: var(--space-1);\n}\n\n.selectHelperText--error {\n  color: var(--color-danger-600);\n}\n\n.selectPlaceholder {\n  color: var(--color-neutral-300);\n}\n\n/* Sizes - Padronizado com GSInput */\n.selectContainer.sizeSm .selectField {\n  --gs-input-height: 2rem;\n  font-size: var(--font-size-sm, 0.875rem);\n}\n\n.selectContainer.sizeMd .selectField {\n  --gs-input-height: 2.25rem;\n  font-size: var(--font-size-base, 1rem);\n}\n\n.selectContainer.sizeLg .selectField {\n  --gs-input-height: 2.75rem;\n  font-size: var(--font-size-lg, 1.125rem);\n}\n\n\n/* Variants - CSS Modules (like GSInput) */\n.selectContainer.variantOutlined .selectField {\n  border: 1px solid var(--color-neutral-200);\n}\n\n.selectContainer.variantFilled .selectField {\n  background-color: var(--background-level1);\n  border: 1px solid transparent;\n}\n\n.selectContainer.variantSoft .selectField {\n  background-color: var(--background-level1);\n  border: 1px solid var(--color-neutral-200);\n}\n\n.selectContainer.variantSoft.colorPrimary .selectField {\n  background-color: var(--color-primary-700);\n  color: var(--color-primary-700);\n}\n.selectContainer.variantSoft.colorSecondary .selectField {\n  background-color: var(--color-secondary-700);\n  color: var(--color-secondary-700);\n}\n.selectContainer.variantSoft.colorSuccess .selectField {\n  background-color: var(--color-success-700);\n  color: var(--color-success-700);\n}\n.selectContainer.variantSoft.colorDanger .selectField {\n  background-color: var(--color-danger-700);\n  color: var(--color-danger-700);\n}\n.selectContainer.variantSoft.colorWarning .selectField {\n  background-color: var(--color-warning-700);\n  color: var(--color-warning-700);\n}\n.selectContainer.variantSoft.colorInfo .selectField {\n  background-color: var(--color-info-700);\n  color: var(--color-info-700);\n}\n.selectContainer.variantSoft.colorNeutral .selectField {\n  background-color: var(--color-neutral-800);\n  color: var(--color-neutral-700);\n}\n\n.selectContainer.variantSolid .selectField {\n  border: 2px solid var(--color-neutral-200);\n  background-color: var(--background-body);\n}\n\n.selectContainer.variantSolid.colorPrimary .selectField {\n  border-color: var(--color-primary-500);\n}\n.selectContainer.variantSolid.colorSecondary .selectField {\n  border-color: var(--color-secondary-500);\n}\n.selectContainer.variantSolid.colorSuccess .selectField {\n  border-color: var(--color-success-500);\n}\n.selectContainer.variantSolid.colorDanger .selectField {\n  border-color: var(--color-danger-500);\n}\n.selectContainer.variantSolid.colorWarning .selectField {\n  border-color: var(--color-warning-500);\n}\n.selectContainer.variantSolid.colorInfo .selectField {\n  border-color: var(--color-info-500);\n}\n.selectContainer.variantSolid.colorNeutral .selectField {\n  border-color: var(--color-neutral-500);\n}\n\n.selectContainer.variantPlain .selectField {\n  background-color: transparent;\n  border: none;\n  box-shadow: none;\n}\n\n/* Colors - CSS Modules (like GSInput) */\n/* Primary */\n.selectContainer.colorPrimary .selectField:hover {\n  border-color: var(--color-primary-300);\n}\n.selectContainer.colorPrimary .selectField:focus-within {\n  border-color: var(--color-primary, #3b82f6);\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n}\n.selectContainer.colorPrimary .selectOption--selected {\n  background-color: var(--color-primary-400);\n  /* color: var(--color-primary-700); */\n}\n.selectContainer.colorPrimary .selectOption:hover {\n  background-color: var(--color-primary-500);\n}\n\n/* Secondary */\n.selectContainer.colorSecondary .selectField:hover {\n  border-color: var(--color-secondary-300);\n}\n.selectContainer.colorSecondary .selectField:focus-within {\n  border-color: var(--color-secondary-500);\n  box-shadow: 0 0 0 2px var(--color-secondary-700);\n}\n.selectContainer.colorSecondary .selectOption--selected {\n  background-color: var(--color-secondary-700);\n  color: var(--color-secondary-700);\n}\n.selectContainer.colorSecondary .selectOption:hover {\n  background-color: var(--color-secondary-700);\n}\n\n/* Success */\n.selectContainer.colorSuccess .selectField:hover {\n  border-color: var(--color-success-300);\n}\n.selectContainer.colorSuccess .selectField:focus-within {\n  border-color: var(--color-success-500);\n  box-shadow: 0 0 0 2px var(--color-success-700);\n}\n.selectContainer.colorSuccess .selectOption--selected {\n  background-color: var(--color-success-700);\n  color: var(--color-success-700);\n}\n.selectContainer.colorSuccess .selectOption:hover {\n  background-color: var(--color-success-700);\n}\n\n/* Warning */\n.selectContainer.colorWarning .selectField:hover {\n  border-color: var(--color-warning-300);\n}\n.selectContainer.colorWarning .selectField:focus-within {\n  border-color: var(--color-warning-500);\n  box-shadow: 0 0 0 2px var(--color-warning-700);\n}\n.selectContainer.colorWarning .selectOption--selected {\n  background-color: var(--color-warning-700);\n  color: var(--color-warning-700);\n}\n.selectContainer.colorWarning .selectOption:hover {\n  background-color: var(--color-warning-700);\n}\n\n/* Danger */\n.selectContainer.colorDanger .selectField:hover {\n  border-color: var(--color-danger-300);\n}\n.selectContainer.colorDanger .selectField:focus-within {\n  border-color: var(--color-danger-500);\n  box-shadow: 0 0 0 2px var(--color-danger-700);\n}\n.selectContainer.colorDanger .selectOption--selected {\n  background-color: var(--color-danger-700);\n  color: var(--color-danger-700);\n}\n.selectContainer.colorDanger .selectOption:hover {\n  background-color: var(--color-danger-700);\n}\n\n/* Info */\n.selectContainer.colorInfo .selectField:hover {\n  border-color: var(--color-info-300);\n}\n.selectContainer.colorInfo .selectField:focus-within {\n  border-color: var(--color-info-500);\n  box-shadow: 0 0 0 2px var(--color-info-700);\n}\n.selectContainer.colorInfo .selectOption--selected {\n  background-color: var(--color-info-700);\n  color: var(--color-info-700);\n}\n.selectContainer.colorInfo .selectOption:hover {\n  background-color: var(--color-info-700);\n}\n\n/* Neutral */\n.selectContainer.colorNeutral .selectField:hover {\n  border-color: var(--color-neutral-300);\n}\n.selectContainer.colorNeutral .selectField:focus-within {\n  border-color: var(--color-neutral-500);\n  box-shadow: 0 0 0 2px var(--color-neutral-700);\n}\n.selectContainer.colorNeutral .selectOption--selected {\n  background-color: var(--color-neutral-800);\n  color: var(--color-neutral-700);\n}\n.selectContainer.colorNeutral .selectOption:hover {\n  background-color: var(--color-neutral-700);\n}\n\n/* Width Modes - CSS Modules */\n/* Container base - DEFAULT */\n.selectContainer {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n/* Min width (default) - 200px minimum */\n.selectContainer.widthMin {\n  min-width: 200px;\n  width: auto;\n}\n\n.selectContainer.widthMin .selectField,\n.selectContainer.widthMin .selectTriggerWrapper {\n  min-width: 200px;\n}\n\n/* Auto width - fit content */\n.selectContainer.widthAuto {\n  min-width: unset;\n  width: auto;\n}\n\n.selectContainer.widthAuto .selectField {\n  width: auto;\n  min-width: 150px;\n}\n\n.selectContainer.widthAuto .selectTriggerWrapper {\n  width: auto;\n  flex: 1;\n}\n\n/* Compact width - fit content, no minimum width */\n.selectContainer.widthCompact {\n  min-width: unset;\n  width: auto;\n}\n\n.selectContainer.widthCompact .selectField {\n  width: auto;\n  min-width: unset;\n}\n\n.selectContainer.widthCompact .selectTriggerWrapper {\n  width: auto;\n  flex: 1;\n}\n\n/* Full width */\n.selectContainer.widthFull,\n.selectContainer.fullWidth {\n  width: 100% !important;\n  min-width: unset !important;\n}\n\n.selectContainer.widthFull .selectField,\n.selectContainer.widthFull .selectTriggerWrapper,\n.selectContainer.fullWidth .selectField,\n.selectContainer.fullWidth .selectTriggerWrapper {\n  width: 100%;\n  flex: 1;\n}\n\n/* Multiple select */\n.selectInput[multiple] {\n  padding-right: var(--space-3);\n}\n\n.selectInput[multiple] + .selectIcon {\n  display: none;\n}\n\n/* Dropdown */\n.selectDropdown {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: var(--space-1);\n  max-height: 300px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: var(--color-background);\n  border: 1px solid var(--color-neutral-300);\n  border-radius: var(--radius-sm);\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  z-index: 1000;\n  \n  /* Animations - only opacity and scale to not conflict with alignment transform */\n  animation: dropdownFadeIn 0.15s cubic-bezier(0.4, 0, 0.2, 1);\n  transform-origin: top center;\n}\n\n/* Dropdown opening upwards */\n.selectDropdown--upward {\n  top: auto;\n  bottom: 100%;\n  margin-top: 0;\n  margin-bottom: var(--space-1);\n  transform-origin: bottom center;\n}\n\n/* Animation keyframes - no translateY to avoid conflict with alignment */\n@keyframes dropdownFadeIn {\n  from {\n    opacity: 0;\n    scale: 0.97;\n  }\n  to {\n    opacity: 1;\n    scale: 1;\n  }\n}\n\n/* Option */\n.selectOption {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: var(--space-2) var(--space-3);\n  cursor: pointer;\n  transition: background-color 0.15s ease;\n  color: var(--color-foreground);\n  font-size: var(--font-size-sm);\n}\n\n.selectOption:hover {\n  background-color: var(--color-neutral-800);\n  color: var(--text-on-primary);\n}\n\n.selectOption:focus {\n  outline: none;\n  background-color: var(--color-primary-700);\n  color: var(--text-on-primary);\n}\n\n.selectOption--selected {\n  background-color: var(--color-primary-700);\n  font-weight: var(--font-weight-medium);\n  color: var(--text-on-primary);\n}\n\n.selectOption--selected:hover {\n  background-color: var(--color-primary-700);\n}\n\n.selectOption--disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n.selectOptionCheck {\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  padding-left: 0.5rem;\n}\n\n.selectContainer.colorPrimary .selectOptionCheck {\n  color: var(--color-primary-700);\n}\n.selectContainer.colorSecondary .selectOptionCheck {\n  color: var(--color-secondary-500);\n}\n.selectContainer.colorSuccess .selectOptionCheck {\n  color: var(--color-success-500);\n}\n.selectContainer.colorDanger .selectOptionCheck {\n  color: var(--color-danger-500);\n}\n.selectContainer.colorWarning .selectOptionCheck {\n  color: var(--color-warning-500);\n}\n.selectContainer.colorInfo .selectOptionCheck {\n  color: var(--color-info-500);\n}\n.selectContainer.colorNeutral .selectOptionCheck {\n  color: var(--color-neutral-600);\n}\n\n/* Container (already defined above with width rules) */\n\n.selectWrapper {\n  position: relative;\n}\n\n/* Trigger Wrapper (for validation icon outside) */\n.selectTriggerWrapper {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  flex: 1;\n}\n\n/* Label Container */\n.selectLabelContainer {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1, 0.25rem);\n  margin-bottom: 0.25rem;\n}\n\n/* Label */\n.selectLabel {\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-foreground);\n  line-height: var(--line-height-tight);\n  transition: color 0.2s ease;\n}\n\n.selectLabelRequired::after {\n  content: ' *';\n  color: var(--color-danger-500);\n}\n\n.selectHelperIcon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-secondary, #6b7280);\n  cursor: help;\n  transition: color 0.2s ease;\n  flex-shrink: 0;\n  line-height: 1;\n}\n\n.selectHelperIcon:hover {\n  color: var(--color-primary-500);\n}\n\n/* Error and Helper Text */\n.selectError {\n  font-size: var(--font-size-xs);\n  color: var(--color-danger-600);\n  margin-top: var(--space-1);\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.selectHelper {\n  font-size: var(--font-size-xs);\n  color: var(--color-neutral-600);\n  margin-top: var(--space-1);\n}\n\n/* Empty State */\n.selectEmptyState {\n  padding: var(--space-4) var(--space-3);\n  text-align: center;\n  color: var(--color-neutral-500);\n  font-size: var(--font-size-sm);\n}\n\n/* Loading State (Async) */\n.selectLoadingState {\n  padding: var(--space-4) var(--space-3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  color: var(--color-neutral-600);\n  font-size: var(--font-size-sm);\n}\n\n/* Error State (Async) */\n.selectErrorState {\n  padding: var(--space-4) var(--space-3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  color: var(--color-danger-600);\n  font-size: var(--font-size-sm);\n  text-align: center;\n}\n\n/* Clear Button */\n.selectClearButton {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  margin: 0 0.125rem;\n  border-radius: var(--radius-sm);\n  color: var(--color-neutral-500);\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 1.5rem;\n  min-height: 1.5rem;\n}\n\n/* When clear button is inside (positioned in field) - absolute positioning */\n.selectField .selectClearButton {\n  position: absolute;\n  /* Default: close to chevron when no validation icon */\n  right: 2rem; /* ~32px - space for chevron */\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 3;\n  pointer-events: auto;\n}\n\n/* When validation icon is also inside - push clear button further left */\n.selectField.selectField--withValidationIcon .selectClearButton {\n  right: 3.5rem; /* ~56px - space for validation + chevron */\n}\n\n/* When clear button is outside (in wrapper) */\n.selectTriggerWrapper > .selectClearButton {\n  position: static;\n  transform: none;\n  z-index: auto;\n}\n\n.selectClearButton:hover {\n  background-color: var(--color-neutral-800);\n  color: var(--color-neutral-700);\n}\n\n.selectClearButton:focus {\n  outline: calc(2px * var(--outline-enabled, 1)) solid var(--color-primary-500);\n  outline-offset: calc(2px * var(--outline-enabled, 1));\n}\n\n/* Loading Spinner */\n.selectLoadingSpinner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 0.5rem;\n}\n\n/* When loading spinner is inside (positioned like icon) */\n.selectField .selectLoadingSpinner {\n  position: absolute;\n  right: var(--space-3);\n  top: 50%;\n  transform: translateY(-50%);\n  padding: 0;\n  pointer-events: none;\n}\n\n/* When loading spinner is outside (in wrapper) */\n.selectTriggerWrapper > .selectLoadingSpinner {\n  position: static;\n  transform: none;\n  pointer-events: auto;\n}\n\n.inlineLoading {\n  display: inline-flex !important;\n  align-items: center;\n  justify-content: center;\n  width: auto !important;\n  min-height: 0 !important;\n  padding: 0 !important;\n  background: transparent !important;\n  box-shadow: none !important;\n}\n\n.inlineLoading :global([data-gs-el='title']),\n.inlineLoading :global([data-gs-el='description']),\n.inlineLoading :global([data-gs-el='actions']),\n.inlineLoading :global([data-gs-el='content']) {\n  display: none !important;\n}\n\n.inlineLoadingNoText :global([data-gs-el='message']) {\n  display: none !important;\n}\n\n.dropdownLoading {\n  display: flex !important;\n  align-items: center;\n  justify-content: center;\n  width: 100% !important;\n  min-height: 0 !important;\n  padding: 0 !important;\n  background: transparent !important;\n  box-shadow: none !important;\n}\n\n.dropdownLoading :global([data-gs-el='title']),\n.dropdownLoading :global([data-gs-el='description']),\n.dropdownLoading :global([data-gs-el='actions']),\n.dropdownLoading :global([data-gs-el='content']) {\n  display: none !important;\n}\n\n/* Decorators */\n.selectStartDecorator,\n.selectEndDecorator {\n  display: flex;\n  align-items: center;\n  padding: 0 0.5rem;\n  color: var(--color-neutral-600);\n}\n\n/* Validation Icon */\n.selectValidationIcon {\n  /* When inside trigger: position before chevron icon */\n  position: absolute;\n  right: 2rem; /* ~32px - space for chevron (16px) + gap */\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  align-items: center;\n  font-size: 1.25rem;\n  cursor: help;\n  flex-shrink: 0;\n  z-index: 2;\n}\n\n.selectValidationIcon[role=\"alert\"] {\n  cursor: help;\n  pointer-events: auto;\n}\n\n.selectValidationIcon:hover {\n  opacity: 0.8;\n}\n\n/* When outside trigger: reset to normal flow */\n.selectTriggerWrapper > .selectValidationIcon {\n  position: static;\n  transform: none;\n  margin: 0;\n  pointer-events: auto;\n}\n\n.selectValidationIcon--error {\n  color: var(--color-danger-500);\n}\n\n.selectValidationIcon--success {\n  color: var(--color-success-500);\n}\n\n.selectValidationIcon--warning {\n  color: var(--color-warning-500);\n}\n\n/* Focused option (keyboard navigation) - uses container color */\n.selectOption--focused {\n  outline: none;\n}\n\n.selectContainer.colorPrimary .selectOption--focused {\n  background-color: var(--color-primary-500);\n  color: var(--text-on-primary);\n}\n.selectContainer.colorSecondary .selectOption--focused {\n  background-color: var(--color-secondary-700);\n}\n.selectContainer.colorSuccess .selectOption--focused {\n  background-color: var(--color-success-700);\n}\n.selectContainer.colorDanger .selectOption--focused {\n  background-color: var(--color-danger-700);\n}\n.selectContainer.colorWarning .selectOption--focused {\n  background-color: var(--color-warning-700);\n}\n.selectContainer.colorInfo .selectOption--focused {\n  background-color: var(--color-info-700);\n}\n.selectContainer.colorNeutral .selectOption--focused {\n  background-color: var(--color-neutral-800);\n}\n\n/* Validation states - CSS Modules */\n.selectContainer.error .selectField {\n  border-color: var(--color-danger-500);\n}\n\n.selectContainer.success .selectField {\n  border-color: var(--color-success-500);\n}\n\n.selectContainer.warning .selectField {\n  border-color: var(--color-warning-500);\n}\n\n/* Loading state - CSS Modules */\n.selectContainer.loading .selectField {\n  cursor: wait;\n  opacity: 0.7;\n}\n\n/* ============================================ */\n/* OPTION GROUPS                                */\n/* ============================================ */\n\n.selectGroupLabel {\n  padding: var(--space-2) var(--space-3);\n  font-size: var(--font-size-xs);\n  font-weight: var(--font-weight-semibold);\n  color: var(--color-neutral-600);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  background-color: var(--color-neutral-50);\n  border-bottom: 1px solid var(--color-neutral-200);\n  \n  /* Sticky positioning - MUI Joy style */\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  \n  /* Ensure it stays above options */\n  backdrop-filter: blur(4px);\n  background-color: rgba(249, 250, 251, 0.95);\n}\n\n/* Dark mode support for sticky headers */\n@media (prefers-color-scheme: dark) {\n  .selectGroupLabel {\n    background-color: rgba(31, 41, 55, 0.95);\n    border-bottom-color: var(--color-neutral-700);\n    color: var(--color-neutral-300);\n  }\n}\n\n/* First group label - no top padding in dropdown */\n.selectGroup:first-child .selectGroupLabel {\n  border-top-left-radius: var(--radius-sm);\n  border-top-right-radius: var(--radius-sm);\n}\n\n/* Options inside groups */\n.selectGroup .selectOption {\n  padding-left: var(--space-4);\n}\n\n/* ============================================ */\n/* SEARCH/FILTER                                */\n/* ============================================ */\n\n.selectSearchWrapper {\n  position: relative;\n  padding: var(--space-2);\n  border-bottom: 1px solid var(--color-neutral-200);\n  background-color: var(--color-background);\n  \n  /* Sticky at top of dropdown */\n  position: sticky;\n  top: 0;\n  z-index: 20;\n}\n\n.selectSearchInput {\n  width: 100%;\n  padding: var(--space-2) var(--space-3);\n  padding-left: var(--space-8);\n  border: 1px solid var(--color-neutral-300);\n  border-radius: var(--radius-sm);\n  background-color: var(--color-background);\n  color: var(--color-foreground);\n  font-size: var(--font-size-sm);\n  outline: none;\n  transition: all 0.2s ease;\n}\n\n.selectSearchInput:focus {\n  border-color: var(--color-primary-500);\n  box-shadow: 0 0 0 2px var(--color-primary-700);\n  outline: calc(2px * var(--outline-enabled, 1)) solid var(--color-primary-500);\n  outline-offset: calc(2px * var(--outline-enabled, 1));\n}\n\n.selectSearchInput::placeholder {\n  color: var(--color-neutral-300);\n}\n\n.selectSearchClear {\n  position: absolute;\n  right: var(--space-3);\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: var(--radius-sm);\n  color: var(--color-neutral-500);\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.selectSearchClear:hover {\n  background-color: var(--color-neutral-800);\n  color: var(--color-neutral-700);\n}\n\n.selectSearchClear:focus {\n  outline: calc(2px * var(--outline-enabled, 1)) solid var(--color-primary-500);\n  outline-offset: calc(2px * var(--outline-enabled, 1));\n}\n\n/* ============================================ */\n/* MULTI-SELECT CHIPS                           */\n/* ============================================ */\n\n.selectInput--multiple {\n  padding: 0.25rem;\n  min-height: 2.5rem;\n  height: auto;\n}\n\n.selectChips {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n  align-items: center;\n}\n\n.selectChip {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.125rem 0.375rem;\n  background-color: var(--color-primary-100);\n  color: var(--color-primary-700);\n  border-radius: var(--radius-sm);\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n  line-height: 1.5;\n  max-width: 200px;\n}\n\n.selectChipLabel {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.selectChipRemove {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n  color: var(--color-primary-600);\n  transition: color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  line-height: 1;\n}\n\n.selectChipRemove:hover {\n  color: var(--color-primary-800);\n}\n\n.selectChipRemove:focus {\n  outline: calc(2px * var(--outline-enabled, 1)) solid var(--color-primary-500);\n  outline-offset: calc(1px * var(--outline-enabled, 1));\n  border-radius: var(--radius-sm);\n}\n\n/* Option checkbox (multi-select) */\n.selectOptionCheckbox {\n  display: flex;\n  align-items: center;\n  margin-right: 0.5rem;\n  color: var(--color-neutral-300);\n  font-size: 18px;\n}\n\n/* Checkbox colors in multi-select - CSS Modules */\n.selectContainer.colorPrimary .selectOptionCheckbox--checked {\n  color: var(--color-primary-500);\n}\n.selectContainer.colorSecondary .selectOptionCheckbox--checked {\n  color: var(--color-secondary-500);\n}\n.selectContainer.colorSuccess .selectOptionCheckbox--checked {\n  color: var(--color-success-500);\n}\n.selectContainer.colorDanger .selectOptionCheckbox--checked {\n  color: var(--color-danger-500);\n}\n.selectContainer.colorWarning .selectOptionCheckbox--checked {\n  color: var(--color-warning-500);\n}\n.selectContainer.colorInfo .selectOptionCheckbox--checked {\n  color: var(--color-info-500);\n}\n.selectContainer.colorNeutral .selectOptionCheckbox--checked {\n  color: var(--color-neutral-600);\n}"],"mappings":"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","names":["label","error"]}