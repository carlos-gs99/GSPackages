import{useState,useCallback}from'react';import clsx from'clsx';import{useTranslation}from'@carlos-gs99/hooks';import{useDebug}from'@carlos-gs99/utils';import{GSIcon}from'@carlos-gs99/gs-icon';import{registerGSAccordionI18n,GS_ACCORDION_NAMESPACE}from'./i18n';import type{GSAccordionProps}from'./types';import s from'./styles.module.css';export const GSAccordion:React.FC<GSAccordionProps>=({items,multiple=false,defaultExpanded=[],onChange,variant='outlined',size='md',className,debug=false})=>{const{i18n}=useTranslation(GS_ACCORDION_NAMESPACE);registerGSAccordionI18n(i18n);const debugTools=useDebug('GSAccordion',debug);const[expanded,setExpanded]=useState<string[]>(defaultExpanded);const toggle=useCallback((id:string)=>{const next=expanded.includes(id)?expanded.filter(x=>x!==id):multiple?[...expanded,id]:[id];setExpanded(next);onChange?.(next);debugTools.log('toggle',{id,next});},[expanded,multiple,onChange,debugTools]);return<div className={clsx(s.accordion,className)} data-gs="GSAccordion" data-variant={variant} data-size={size}>{items.map(item=>{const isExpanded=expanded.includes(item.id);return<div key={item.id} className={s.item}><button className={s.header} onClick={()=>!item.disabled&&toggle(item.id)} disabled={item.disabled} aria-expanded={isExpanded}><span className={s.title}>{item.title}</span><GSIcon name={isExpanded?'chevron-up':'chevron-down'}size="sm"/></button>{isExpanded&&<div className={s.content}>{item.content}</div>}</div>;})}</div>;};export default GSAccordion;

